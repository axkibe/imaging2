<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>imaging2: imaging::Lbfgs Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceimaging.html">imaging</a>::<a class="el" href="classimaging_1_1Lbfgs.html">Lbfgs</a>
  </div>
</div>
<div class="contents">
<h1>imaging::Lbfgs Class Reference<br>
<small>
[<a class="el" href="group__minimize.html">Minimization Module</a>]</small>
</h1><!-- doxytag: class="imaging::Lbfgs" --><!-- doxytag: inherits="imaging::MinimizerInterface" -->Minimizes differentiable energies using the Limited Memory BFGS method (a Quasi-Newton method).  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="Lbfgs_8hpp-source.html">Lbfgs.hpp</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for imaging::Lbfgs:</div>
<div class="dynsection">

<p><center><img src="classimaging_1_1Lbfgs.png" usemap="#imaging::Lbfgs_map" border="0" alt=""></center>
<map name="imaging::Lbfgs_map">
<area href="classimaging_1_1MinimizerInterface.html" alt="imaging::MinimizerInterface" shape="rect" coords="0,0,165,24">
</map>
</div>

<p>
<a href="classimaging_1_1Lbfgs-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimaging_1_1Lbfgs.html#bdf09e2878953a64ae0f12b0f8924622">Lbfgs</a> (<a class="el" href="classimaging_1_1DifferentiableEnergyInterface.html">DifferentiableEnergyInterface</a> &amp;energy, <a class="el" href="group__core.html#gf2c95632db94ddc193b32e57a1e8e2d9">float_t</a> epsilon=1.0e-5, float_t line_search_f_tolerance=1.0e-4, float_t line_search_g_tolerance=0.9, size_t n_correction_steps=6, size_t n_max_line_search_steps=20)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimaging_1_1Lbfgs.html#f52a23ab35c0e8cfc96decef75b3ab77">minimize</a> (<a class="el" href="group__core.html#g9a15696a1ae77dcbdb1f0de8b115c2e6">size_t</a> n_max_steps, <a class="el" href="group__core.html#g9a15696a1ae77dcbdb1f0de8b115c2e6">size_t</a> &amp;n_steps)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Minimizes differentiable energies using the Limited Memory BFGS method (a Quasi-Newton method). 
<p>
Minimizes a given energy by means of a Newton type method with estimated Hessian. This class and its documentation is based on <a href="http://www.chokkan.org/software/liblbfgs">liblbfgs</a>, a <em>C library of Limited memory BFGS (L-BFGS)</em> by Jorge Nocedal and Naoaki Okazaki. <hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="bdf09e2878953a64ae0f12b0f8924622"></a><!-- doxytag: member="imaging::Lbfgs::Lbfgs" ref="bdf09e2878953a64ae0f12b0f8924622" args="(DifferentiableEnergyInterface &amp;energy, float_t epsilon=1.0e-5, float_t line_search_f_tolerance=1.0e-4, float_t line_search_g_tolerance=0.9, size_t n_correction_steps=6, size_t n_max_line_search_steps=20)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">imaging::Lbfgs::Lbfgs           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimaging_1_1DifferentiableEnergyInterface.html">DifferentiableEnergyInterface</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>energy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core.html#gf2c95632db94ddc193b32e57a1e8e2d9">float_t</a>&nbsp;</td>
          <td class="paramname"> <em>epsilon</em> = <code>1.0e-5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core.html#gf2c95632db94ddc193b32e57a1e8e2d9">float_t</a>&nbsp;</td>
          <td class="paramname"> <em>line_search_f_tolerance</em> = <code>1.0e-4</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core.html#gf2c95632db94ddc193b32e57a1e8e2d9">float_t</a>&nbsp;</td>
          <td class="paramname"> <em>line_search_g_tolerance</em> = <code>0.9</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core.html#g9a15696a1ae77dcbdb1f0de8b115c2e6">size_t</a>&nbsp;</td>
          <td class="paramname"> <em>n_correction_steps</em> = <code>6</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core.html#g9a15696a1ae77dcbdb1f0de8b115c2e6">size_t</a>&nbsp;</td>
          <td class="paramname"> <em>n_max_line_search_steps</em> = <code>20</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct a <a class="el" href="classimaging_1_1Lbfgs.html" title="Minimizes differentiable energies using the Limited Memory BFGS method (a Quasi-Newton...">Lbfgs</a> object to minimize <em>energy</em>. To actually start the minimization the user must call <a class="el" href="classimaging_1_1Lbfgs.html#f52a23ab35c0e8cfc96decef75b3ab77">minimize()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>epsilon</em>&nbsp;</td><td>This parameter determines the accuracy with which the solution is to be found. A minimization terminates when ||g|| &lt; <em>epsilon</em> * max(1, ||x||), where ||.|| denotes the Euclidean (L2) norm. The default value is 1e-5. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>line_search_f_tolerance</em>&nbsp;</td><td>A parameter to control the accuracy of the line search routine. The default value is 1e-4. This parameter should be greater than zero and smaller than 0.5. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>line_search_g_tolerance</em>&nbsp;</td><td>The default value is 0.9. If the function gradient evaluations are inexpensive with respect to the cost of the iteration (which is sometimes the case when solving very large problems) it may be advantageous to set this parameter to a small value. A typical small value is 0.1. This parameter should be greater than the <em>line_search_f_tolerance</em> parameter (1e-4) and smaller than 1.0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n_correction_steps</em>&nbsp;</td><td>The number of corrections to approximate the inverse hessian matrix. The L-BFGS routine stores the computation results of previous <em>n_correction_steps</em> iterations to approximate the inverse hessian matrix of the current iteration. This parameter controls the size of the limited memories (corrections). The default value is 6. Values less than 3 are not recommended. Large values will result in excessive computing time. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n_max_line_search_steps</em>&nbsp;</td><td>The maximum number of trials for the line search. This parameter controls the number of function and gradients evaluations per iteration for the line search routine. The default value is 20. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="f52a23ab35c0e8cfc96decef75b3ab77"></a><!-- doxytag: member="imaging::Lbfgs::minimize" ref="f52a23ab35c0e8cfc96decef75b3ab77" args="(size_t n_max_steps, size_t &amp;n_steps)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool imaging::Lbfgs::minimize           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__core.html#g9a15696a1ae77dcbdb1f0de8b115c2e6">size_t</a>&nbsp;</td>
          <td class="paramname"> <em>n_max_steps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core.html#g9a15696a1ae77dcbdb1f0de8b115c2e6">size_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>n_actual_steps</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Start the minimization process. At most <em>n_max_steps</em> will be performed. If the convergence criterion (as set in the constructor) is met before the number of maximal steps is reached the function returns true. Otherwise it returns false. The actual number of performed stops is stored in <em>n_steps</em>. Upon return, the energy (as set in the constructor) will have the solution as its current argument. 
<p>Implements <a class="el" href="classimaging_1_1MinimizerInterface.html#608fb27f16c109a266e8c9788fa12355">imaging::MinimizerInterface</a>.</p>

<p>References <a class="el" href="classimaging_1_1EnergyInterface.html#866c01a6b5985251feb5bfacf8ed42e9">imaging::EnergyInterface::current_argument()</a>, <a class="el" href="MessageInterface_8hpp-source.html#l00050">imaging::MessageInterface::DEBUG_ONLY</a>, <a class="el" href="classimaging_1_1EnergyInterface.html#e6d56293d94f714c86f9adca68134e17">imaging::EnergyInterface::dimension()</a>, and <a class="el" href="MessageInterface_8hpp-source.html#l00046">imaging::MessageInterface::out</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>imaging2/minimize/<a class="el" href="Lbfgs_8hpp-source.html">Lbfgs.hpp</a><li>imaging2/minimize/Lbfgs.cxx</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Feb 10 10:01:31 2009 for imaging2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
